#ifndef C23META_U32_SQRT
#define C23META_U32_SQRT

#define U32_SQRT(X) _U32_SQRT(X)
#define _U32_SQRT(X) _U32_SQRT_EVAL(_U32_SQRT_G(X))
#define _U32_SQRT_EVAL(X) _U32_SQRT_EVAL1(_U32_SQRT_EVAL1(_U32_SQRT_EVAL1(_U32_SQRT_EVAL1(X))))
#define _U32_SQRT_EVAL1(X) _U32_SQRT_EVAL2(_U32_SQRT_EVAL2(_U32_SQRT_EVAL2(_U32_SQRT_EVAL2(X))))
#define _U32_SQRT_EVAL2(X) _U32_SQRT_EVAL3(_U32_SQRT_EVAL3(_U32_SQRT_EVAL3(_U32_SQRT_EVAL3(X))))
#define _U32_SQRT_EVAL3(X) _U32_SQRT_EVAL4(_U32_SQRT_EVAL4(_U32_SQRT_EVAL4(_U32_SQRT_EVAL4(X))))
#define _U32_SQRT_EVAL4(X) X

#define _U32_SQRT_G(S) _U32_SQRT_PREAMBLE(U32_GEQ(U32_1, S), S)
#define _U32_SQRT_PREAMBLE(G,S) CAT(_U32_SQRT_P,G)(S)
#define _U32_SQRT_P0(S) _U32_SQRT_X(S,U32_RSH1(S),_U32_SQRT_UPDATE(S,U32_RSH1(S)))
#define _U32_SQRT_P1(S) S

#define _U32_SQRT_UPDATE(S,X0) U32_RSH1(U32_ADD(X0, U32_DIV(S,X0)))

#define _U32_SQRT_X(S,X0,X1) _U32_SQRT_Y(U32_GT(X0,X1),S,X0,X1)
#define _U32_SQRT_Y(G,S,X0,X1) CAT(_U32_SQRT_Z,G)(S,X0,X1)
#define _U32_SQRT_Z0(S,X0,X1) X0
#define _U32_SQRT_Z1(S,X0,X1) DEFER(_U32_SQRT_I)()(S,X1,_U32_SQRT_UPDATE(S,X1))
#define _U32_SQRT_I() _U32_SQRT_X


#endif