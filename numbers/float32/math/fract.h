#ifndef C23META_FP32_FRACT
#define C23META_FP32_FRACT

#define FP32_FRACT(X) _FP32_FRACT_EVAL(CAT(_FP32_FRACT_ISZ, FP32_EQ(X,FP32_0))(X))
#define _FP32_FRACT_EVAL(X) _FP32_FRACT_EVAL1(_FP32_FRACT_EVAL1(_FP32_FRACT_EVAL1(_FP32_FRACT_EVAL1(X))))
#define _FP32_FRACT_EVAL1(X) _FP32_FRACT_EVAL2(_FP32_FRACT_EVAL2(_FP32_FRACT_EVAL2(_FP32_FRACT_EVAL2(X))))
#define _FP32_FRACT_EVAL2(X) _FP32_FRACT_EVAL3(_FP32_FRACT_EVAL3(_FP32_FRACT_EVAL3(_FP32_FRACT_EVAL3(X))))
#define _FP32_FRACT_EVAL3(X) X

#define _FP32_FRACT_ISZ0(X) _FP32_FRACT_X(FP32_SIGN_BIT(X),FP32_MANTISSA(X),FP32_EXPONENT(X))
#define _FP32_FRACT_ISZ1(X) FP32_0

#define _FP32_FRACT_X(S,M,E)\
  _FP32_FRACT_Y(\
    S,\
    U32_AND(M, U32_SUB(U32_LSH(U32_1, U32_SUB(U32_23, E)), U32_1)),\
    E\
  )
#define _FP32_FRACT_Y(S,M,E) FP32_NORMALIZE(E,M)

#endif