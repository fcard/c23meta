#ifndef C23META_FP32_NORMALIZE
#define C23META_FP32_NORMALIZE

#define FP32_MANTISSA_MAX (0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 1,0,0,0,0,0,0,0)
#define FP32_MANTISSA_MIN (0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,1, 0,0,0,0,0,0,0,0)

#define FP32_NORMALIZE(E,M) _FP32_NORMALIZE_EQZ(U32_EQ(M,U32_0),E,M)
#define _FP32_NORMALIZE_EQZ(G,E,M) DEFER(CAT(_FP32_NORMALIZE_EQZ_X,G))(E,M)
#define _FP32_NORMALIZE_EQZ_X1(E,M) FP32_0
#define _FP32_NORMALIZE_EQZ_X0(E,M) _FP32_NORMALIZE_MLARGE(U32_GEQ(M,FP32_MANTISSA_MAX),E,M)

#define _FP32_NORMALIZE_MLARGE(G,E,M) DEFER(CAT(_FP32_NORMALIZE_MLARGE_X,G))(E,M)
#define _FP32_NORMALIZE_MLARGE_X1(E,M) _FP32_NORMALIZE_MLARGE_Y(U32_ADD(E,U32_1), U32_RSH1(M))
#define _FP32_NORMALIZE_MLARGE_X0(E,M) _FP32_NORMALIZE_MSMALL(U32_LT(M,FP32_MANTISSA_MIN),E,M)
#define _FP32_NORMALIZE_MLARGE_Y(E,M) DEFER(_FP32_NORMALIZE_MLARGE_I)()(U32_GEQ(M,FP32_MANTISSA_MAX),E,M)
#define _FP32_NORMALIZE_MLARGE_I() _FP32_NORMALIZE_MLARGE

#define _FP32_NORMALIZE_MSMALL(G,E,M) DEFER(CAT(_FP32_NORMALIZE_MSMALL_X,G))(E,M)
#define _FP32_NORMALIZE_MSMALL_X1(E,M) _FP32_NORMALIZE_MSMALL_Y(U32_SUB(E,U32_1), U32_LSH1(M))
#define _FP32_NORMALIZE_MSMALL_X0(E,M) _FP32_NORMALIZE_FINISH(E,M)
#define _FP32_NORMALIZE_MSMALL_Y(E,M) DEFER(_FP32_NORMALIZE_MSMALL_I)()(U32_LT(M,FP32_MANTISSA_MIN),E,M)
#define _FP32_NORMALIZE_MSMALL_I() _FP32_NORMALIZE_MSMALL

#define _FP32_NORMALIZE_FINISH(E,M) FP32_FROM_PARTS(0,E,M)
#endif